/* Generated by CIL v. 1.3.7 */
/* print_CIL_Input is true */
#include <crest.h>
int FloppyThread  ;
int KernelMode  ;
int Suspended  ;
int Executive  ;
int DiskController  ;
int FloppyDiskPeripheral  ;
int FlConfigCallBack  ;
int MaximumInterfaceType  ;
int MOUNTDEV_MOUNTED_DEVICE_GUID  ;
int myStatus  ;
int s  ;
int UNLOADED  ;
int NP  ;
int DC  ;
int SKIP1  ;
int SKIP2  ;
int MPR1  ;
int MPR3  ;
int IPC  ;
int pended  ;
int compRegistered  ;
int lowerDriverReturn  ;
int setEventCalled  ;
int customIrp  ;
void _TRACER_assume(int x) { }
void errorFn(int i ) 
{ 

  {
  exit(1);
  _TRACER_assume(0);
}
}
void _BLAST_init(void) 
{ 

  {
  UNLOADED = 0;
  NP = 1;
  DC = 2;
  SKIP1 = 3;
  SKIP2 = 4;
  MPR1 = 5;
  MPR3 = 6;
  IPC = 7;
  s = UNLOADED;
  pended = 0;
  compRegistered = 0;
  lowerDriverReturn = 0;
  setEventCalled = 0;
  customIrp = 0;
  return;
}
}
int PagingReferenceCount  =    0;
int PagingMutex  =    0;
int FlAcpiConfigureFloppy(int DisketteExtension , int FdcInfo ) 
{ 

  {
  return (0);
}
}
int PsCreateSystemThread(int ThreadHandle , int DesiredAccess , int ObjectAttributes , int ProcessHandle , int ClientId , int StartRoutine , int StartContext ) ;
int ObReferenceObjectByHandle(int Handle , int DesiredAccess , int ObjectType , int AccessMode , int Object , int HandleInformation ) ;
int ZwClose(int Handle ) ;
int FlQueueIrpToThread(int Irp , int DisketteExtension ) 
{ int status ;
  int threadHandle ;
  int DisketteExtension__PoweringDown ;
  int DisketteExtension__ThreadReferenceCount ;
  int DisketteExtension__FloppyThread ;
  int Irp__IoStatus__Status ;
  int Irp__IoStatus__Information ;
  int ObjAttributes ;

  {
      CREST_int(ObjAttributes);
      CREST_int(Irp__IoStatus__Information);
      CREST_int(Irp__IoStatus__Status);
      CREST_int(DisketteExtension__FloppyThread);
      CREST_int(DisketteExtension__ThreadReferenceCount);
      CREST_int(DisketteExtension__PoweringDown);
      CREST_int(threadHandle);
      CREST_int(status);
  if ((DisketteExtension__PoweringDown >= 1) && (DisketteExtension__PoweringDown <= 1)) {
    myStatus = -1073741101;
    Irp__IoStatus__Status = -1073741101;
    Irp__IoStatus__Information = 0;
    return (-1073741101);
  }
  DisketteExtension__ThreadReferenceCount = DisketteExtension__ThreadReferenceCount + 1;
  if ((DisketteExtension__ThreadReferenceCount >= 0) && (DisketteExtension__ThreadReferenceCount <= 0)) {
    DisketteExtension__ThreadReferenceCount = DisketteExtension__ThreadReferenceCount + 1;
    PagingReferenceCount = PagingReferenceCount + 1;
    if ((PagingReferenceCount >= 1) && (PagingReferenceCount <= 1)) {

    }
    status = PsCreateSystemThread(threadHandle, 0, ObjAttributes, 0, 0, FloppyThread, DisketteExtension);
    if (status < 0) {
      DisketteExtension__ThreadReferenceCount = -1;
      PagingReferenceCount = PagingReferenceCount - 1;
      if ((PagingReferenceCount >= 0) && (PagingReferenceCount <= 0)) {

      }
      return (status);
    }
    status = ObReferenceObjectByHandle(threadHandle, 1048576, 0, KernelMode, DisketteExtension__FloppyThread, 0);
    ZwClose(threadHandle);
    if (status < 0) {
      return (status);
    }
  }
  if ((pended >= 0) && (pended <= 0)) {
    pended = 1;
  } else {
    errorFn(1);
  }
  return (259);
}
}
void IofCompleteRequest(int Irp , int PriorityBoost ) ;
int FloppyStartDevice(int DeviceObject , int Irp ) ;
int IofCallDriver(int DeviceObject , int Irp ) ;
int KeWaitForSingleObject(int Object , int WaitReason , int WaitMode , int Alertable , int Timeout ) ;
int IoSetDeviceInterfaceState(int SymbolicLinkName , int Enable ) ;
int IoDeleteSymbolicLink(int SymbolicLinkName ) ;
int FloppyPnp(int DeviceObject , int Irp ) 
{ int DeviceObject__DeviceExtension ;
  int Irp__Tail__Overlay__CurrentStackLocation ;
  int Irp__IoStatus__Information ;
  int Irp__IoStatus__Status ;
  int Irp__CurrentLocation ;
  int disketteExtension__IsRemoved ;
  int disketteExtension__IsStarted ;
  int disketteExtension__TargetObject ;
  int disketteExtension__HoldNewRequests ;
  int disketteExtension__FloppyThread ;
  int disketteExtension__InterfaceString__Buffer ;
  int disketteExtension__InterfaceString ;
  int disketteExtension__ArcName__Length ;
  int disketteExtension__ArcName ;
  int irpSp__MinorFunction ;
  int IoGetConfigurationInformation__FloppyCount ;
  int irpSp ;
  int disketteExtension ;
  int ntStatus ;
  int doneEvent ;
  int irpSp___0 ;
  int nextIrpSp ;
  int nextIrpSp__Control ;
  int irpSp___1 ;
  int irpSp__Context ;
  int irpSp__Control ;
  int CIL___Tmp29 ;
  int CIL___Tmp30 ;

  {
      CREST_int(CIL___Tmp30);
      CREST_int(CIL___Tmp29);
      CREST_int(irpSp__Control);
      CREST_int(irpSp__Context);
      CREST_int(irpSp___1);
      CREST_int(nextIrpSp__Control);
      CREST_int(nextIrpSp);
      CREST_int(irpSp___0);
      CREST_int(doneEvent);
      CREST_int(ntStatus);
      CREST_int(disketteExtension);
      CREST_int(irpSp);
      CREST_int(IoGetConfigurationInformation__FloppyCount);
      CREST_int(irpSp__MinorFunction);
      CREST_int(disketteExtension__ArcName);
      CREST_int(disketteExtension__ArcName__Length);
      CREST_int(disketteExtension__InterfaceString);
      CREST_int(disketteExtension__InterfaceString__Buffer);
      CREST_int(disketteExtension__FloppyThread);
      CREST_int(disketteExtension__HoldNewRequests);
      CREST_int(disketteExtension__TargetObject);
      CREST_int(disketteExtension__IsStarted);
      CREST_int(disketteExtension__IsRemoved);
      CREST_int(Irp__CurrentLocation);
      CREST_int(Irp__IoStatus__Status);
      CREST_int(Irp__IoStatus__Information);
      CREST_int(Irp__Tail__Overlay__CurrentStackLocation);
      CREST_int(DeviceObject__DeviceExtension);
  ntStatus = 0;
  PagingReferenceCount = PagingReferenceCount + 1;
  if ((PagingReferenceCount >= 1) && (PagingReferenceCount <= 1)) {

  }
  disketteExtension = DeviceObject__DeviceExtension;
  irpSp = Irp__Tail__Overlay__CurrentStackLocation;
  if (disketteExtension__IsRemoved > 0 || disketteExtension__IsRemoved < 0) {
    Irp__IoStatus__Information = 0;
    Irp__IoStatus__Status = -1073741738;
    myStatus = -1073741738;
    IofCompleteRequest(Irp, 0);
    return (-1073741738);
  }
  if ((irpSp__MinorFunction >= 0) && (irpSp__MinorFunction <= 0)) {
    goto myswitch_0_0;
  } else {
    if ((irpSp__MinorFunction >= 5) && (irpSp__MinorFunction <= 5)) {
      goto myswitch_0_5;
    } else {
      if ((irpSp__MinorFunction >= 1) && (irpSp__MinorFunction <= 1)) {
        goto myswitch_0_5;
      } else {
        if ((irpSp__MinorFunction >= 6) && (irpSp__MinorFunction <= 6)) {
          goto myswitch_0_6;
        } else {
          if ((irpSp__MinorFunction >= 3) && (irpSp__MinorFunction <= 3)) {
            goto myswitch_0_6;
          } else {
            if ((irpSp__MinorFunction >= 4) && (irpSp__MinorFunction <= 4)) {
              goto myswitch_0_4;
            } else {
              if ((irpSp__MinorFunction >= 2) && (irpSp__MinorFunction <= 2)) {
                goto myswitch_0_2;
              } else {
                goto myswitch_0_default;
                if (0) {
                  myswitch_0_0: 
                  ntStatus = FloppyStartDevice(DeviceObject, Irp);
                  goto myswitch_0_break;
                  myswitch_0_5: 
                  if ((irpSp__MinorFunction >= 5) && (irpSp__MinorFunction <= 5)) {

                  }
                  if (disketteExtension__IsStarted >= 0 && disketteExtension__IsStarted <= 0) {
                    if ((s >= NP) && (s <= NP)) {
                      s = SKIP1;
                    } else {
                      errorFn(1);
                    }
                    Irp__CurrentLocation = Irp__CurrentLocation + 1;
                    Irp__Tail__Overlay__CurrentStackLocation = Irp__Tail__Overlay__CurrentStackLocation + 1;
                    ntStatus = IofCallDriver(disketteExtension__TargetObject, Irp);
                    return (ntStatus);
                  }
                  disketteExtension__HoldNewRequests = 1;
                  ntStatus = FlQueueIrpToThread(Irp, disketteExtension);
                  CIL___Tmp29 = (int )ntStatus;
                  if ((CIL___Tmp29 >= 259) && (CIL___Tmp29 <= 259)) {
                    KeWaitForSingleObject(disketteExtension__FloppyThread, Executive, KernelMode, 0, 0);
                    if ((disketteExtension__FloppyThread > 0) || (disketteExtension__FloppyThread < 0)) {

                    }
                    disketteExtension__FloppyThread = 0;
                    Irp__IoStatus__Status = 0;
                    myStatus = 0;
                    if ((s >= NP) && (s <= NP)) {
                      s = SKIP1;
                    } else {
                      errorFn(1);
                    }
                    Irp__CurrentLocation = Irp__CurrentLocation + 1;
                    Irp__Tail__Overlay__CurrentStackLocation = Irp__Tail__Overlay__CurrentStackLocation + 1;
                    ntStatus = IofCallDriver(disketteExtension__TargetObject, Irp);
                  } else {
                    ntStatus = -1073741823;
                    Irp__IoStatus__Status = ntStatus;
                    myStatus = ntStatus;
                    Irp__IoStatus__Information = 0;
                    IofCompleteRequest(Irp, 0);
                  }
                  goto myswitch_0_break;
                  myswitch_0_6: 
                  if ((irpSp__MinorFunction >= 6) && (irpSp__MinorFunction <= 6)) {

                  }
                  if (disketteExtension__IsStarted >= 0 && disketteExtension__IsStarted <= 0) {
                    Irp__IoStatus__Status = 0;
                    myStatus = 0;
                    if ((s >= NP) && (s <= NP)) {
                      s = SKIP1;
                    } else {
                      errorFn(1);
                    }
                    Irp__CurrentLocation = Irp__CurrentLocation + 1;
                    Irp__Tail__Overlay__CurrentStackLocation = Irp__Tail__Overlay__CurrentStackLocation + 1;
                    ntStatus = IofCallDriver(disketteExtension__TargetObject, Irp);
                  } else {
                    Irp__IoStatus__Status = 0;
                    myStatus = 0;
                    irpSp___0 = Irp__Tail__Overlay__CurrentStackLocation;
                    nextIrpSp = Irp__Tail__Overlay__CurrentStackLocation - 1;
                    nextIrpSp__Control = 0;
                    if ((s > NP) || (s < NP)) {
                      errorFn(1);
                    } else {
                      if ((compRegistered > 0) || (compRegistered < 0)) {
                        errorFn(1);
                      } else {
                        compRegistered = 1;
                      }
                    }
                    irpSp___1 = Irp__Tail__Overlay__CurrentStackLocation - 1;
                    irpSp__Context = doneEvent;
                    irpSp__Control = 224;
                    ntStatus = IofCallDriver(disketteExtension__TargetObject, Irp);
                    CIL___Tmp30 = (int )ntStatus;
                    if ((CIL___Tmp30 >= 259) && (CIL___Tmp30 <= 259)) {
                      KeWaitForSingleObject(doneEvent, Executive, KernelMode, 0, 0);
                      ntStatus = myStatus;
                    }
                    disketteExtension__HoldNewRequests = 0;
                    Irp__IoStatus__Status = ntStatus;
                    myStatus = ntStatus;
                    Irp__IoStatus__Information = 0;
                    IofCompleteRequest(Irp, 0);
                  }
                  goto myswitch_0_break;
                  myswitch_0_4: 
                  disketteExtension__IsStarted = 0;
                  Irp__IoStatus__Status = 0;
                  myStatus = 0;
                  if ((s >= NP) && (s <= NP)) {
                    s = SKIP1;
                  } else {
                    errorFn(1);
                  }
                  Irp__CurrentLocation = Irp__CurrentLocation + 1;
                  Irp__Tail__Overlay__CurrentStackLocation = Irp__Tail__Overlay__CurrentStackLocation + 1;
                  ntStatus = IofCallDriver(disketteExtension__TargetObject, Irp);
                  goto myswitch_0_break;
                  myswitch_0_2: 
                  disketteExtension__HoldNewRequests = 0;
                  disketteExtension__IsStarted = 0;
                  disketteExtension__IsRemoved = 1;
                  if ((s >= NP) && (s <= NP)) {
                    s = SKIP1;
                  } else {
                    errorFn(1);
                  }
                  Irp__CurrentLocation = Irp__CurrentLocation + 1;
                  Irp__Tail__Overlay__CurrentStackLocation = Irp__Tail__Overlay__CurrentStackLocation + 1;
                  Irp__IoStatus__Status = 0;
                  myStatus = 0;
                  ntStatus = IofCallDriver(disketteExtension__TargetObject, Irp);
                  if ((disketteExtension__InterfaceString__Buffer > 0) || (disketteExtension__InterfaceString__Buffer < 0)) {
                    IoSetDeviceInterfaceState(disketteExtension__InterfaceString, 0);
                  }
                  if ((disketteExtension__ArcName__Length > 0) || (disketteExtension__ArcName__Length < 0)) {
                    IoDeleteSymbolicLink(disketteExtension__ArcName);
                  }
                  IoGetConfigurationInformation__FloppyCount = IoGetConfigurationInformation__FloppyCount - 1;
                  goto myswitch_0_break;
                  myswitch_0_default: ;
                  if ((s >= NP) && (s <= NP)) {
                    s = SKIP1;
                  } else {
                    errorFn(1);
                  }
                  Irp__CurrentLocation = Irp__CurrentLocation + 1;
                  Irp__Tail__Overlay__CurrentStackLocation = Irp__Tail__Overlay__CurrentStackLocation + 1;
                  ntStatus = IofCallDriver(disketteExtension__TargetObject, Irp);
                } else {
                  myswitch_0_break: ;
                }
              }
            }
          }
        }
      }
    }
  }
  PagingReferenceCount = PagingReferenceCount - 1;
  if ((PagingReferenceCount >= 0) && (PagingReferenceCount <= 0)) {

  }
  return (ntStatus);
}
}
int FlFdcDeviceIo(int DeviceObject , int Ioctl , int Data ) ;
int IoQueryDeviceDescription(int BusType , int BusNumber , int ControllerType , int ControllerNumber , int PeripheralType , int PeripheralNumber , int CalloutRoutine , int Context ) ;
int IoRegisterDeviceInterface(int PhysicalDeviceObject , int InterfaceClassGuid , int ReferenceString , int SymbolicLinkName ) ;
int FloppyStartDevice(int DeviceObject , int Irp ) 
{ int DeviceObject__DeviceExtension ;
  int Irp__Tail__Overlay__CurrentStackLocation ;
  int Irp__IoStatus__Status ;
  int disketteExtension__TargetObject ;
  int disketteExtension__MaxTransferSize ;
  int disketteExtension__DriveType ;
  int disketteExtension__DeviceUnit ;
  int disketteExtension__UnderlyingPDO ;
  int disketteExtension__InterfaceString ;
  int disketteExtension__IsStarted ;
  int disketteExtension__HoldNewRequests ;
  int ntStatus ;
  int pnpStatus ;
  int doneEvent ;
  int fdcInfo ;
  int fdcInfo__BufferCount ;
  int fdcInfo__BufferSize ;
  int fdcInfo__MaxTransferSize ;
  int fdcInfo__AcpiBios ;
  int fdcInfo__AcpiFdiSupported ;
  int fdcInfo__PeripheralNumber ;
  int fdcInfo__BusType ;
  int fdcInfo__ControllerNumber ;
  int fdcInfo__UnitNumber ;
  int fdcInfo__BusNumber ;
  int Dc ;
  int Fp ;
  int disketteExtension ;
  int irpSp ;
  int irpSp___0 ;
  int nextIrpSp ;
  int nextIrpSp__Control ;
  int irpSp___1 ;
  int irpSp__Control ;
  int irpSp__Context ;
  int InterfaceType ;
  int KUSER_SHARED_DATA__AlternativeArchitecture_NEC98x86 ;
  int CIL___Tmp42 ;
  int CIL___Tmp43 ;
  int CIL___Tmp44 ;
  int CIL___Tmp45 ;
  int CIL___Tmp46 ;
  int CIL___Tmp47 ;
  int CIL___Tmp48 ;

  {
      CREST_int(CIL___Tmp48);
      CREST_int(CIL___Tmp47);
      CREST_int(CIL___Tmp46);
      CREST_int(CIL___Tmp45);
      CREST_int(CIL___Tmp44);
      CREST_int(CIL___Tmp43);
      CREST_int(CIL___Tmp42);
      CREST_int(KUSER_SHARED_DATA__AlternativeArchitecture_NEC98x86);
      CREST_int(InterfaceType);
      CREST_int(irpSp__Context);
      CREST_int(irpSp__Control);
      CREST_int(irpSp___1);
      CREST_int(nextIrpSp__Control);
      CREST_int(nextIrpSp);
      CREST_int(irpSp___0);
      CREST_int(irpSp);
      CREST_int(disketteExtension);
      CREST_int(Fp);
      CREST_int(Dc);
      CREST_int(fdcInfo__BusNumber);
      CREST_int(fdcInfo__UnitNumber);
      CREST_int(fdcInfo__ControllerNumber);
      CREST_int(fdcInfo__BusType);
      CREST_int(fdcInfo__PeripheralNumber);
      CREST_int(fdcInfo__AcpiFdiSupported);
      CREST_int(fdcInfo__AcpiBios);
      CREST_int(fdcInfo__MaxTransferSize);
      CREST_int(fdcInfo__BufferSize);
      CREST_int(fdcInfo__BufferCount);
      CREST_int(fdcInfo);
      CREST_int(doneEvent);
      CREST_int(pnpStatus);
      CREST_int(ntStatus);
      CREST_int(disketteExtension__HoldNewRequests);
      CREST_int(disketteExtension__IsStarted);
      CREST_int(disketteExtension__InterfaceString);
      CREST_int(disketteExtension__UnderlyingPDO);
      CREST_int(disketteExtension__DeviceUnit);
      CREST_int(disketteExtension__DriveType);
      CREST_int(disketteExtension__MaxTransferSize);
      CREST_int(disketteExtension__TargetObject);
      CREST_int(Irp__IoStatus__Status);
      CREST_int(Irp__Tail__Overlay__CurrentStackLocation);
      CREST_int(DeviceObject__DeviceExtension);
  Dc = DiskController;
  Fp = FloppyDiskPeripheral;
  disketteExtension = DeviceObject__DeviceExtension;
  irpSp = Irp__Tail__Overlay__CurrentStackLocation;
  irpSp___0 = Irp__Tail__Overlay__CurrentStackLocation;
  nextIrpSp = Irp__Tail__Overlay__CurrentStackLocation - 1;
  nextIrpSp__Control = 0;
  if ((s > NP) || (s < NP)) {
    errorFn(1);
  } else {
    if ((compRegistered > 0) || (compRegistered < 0)) {
      errorFn(1);
    } else {
      compRegistered = 1;
    }
  }
  irpSp___1 = Irp__Tail__Overlay__CurrentStackLocation - 1;
  irpSp__Context = doneEvent;
  irpSp__Control = 224;
  ntStatus = IofCallDriver(disketteExtension__TargetObject, Irp);
  CIL___Tmp42 = (int )ntStatus;
  if ((CIL___Tmp42 >= 259) && (CIL___Tmp42 <= 259)) {
    ntStatus = KeWaitForSingleObject(doneEvent, Executive, KernelMode, 0, 0);
    ntStatus = myStatus;
  }
  fdcInfo__BufferCount = 0;
  fdcInfo__BufferSize = 0;
  CIL___Tmp43 = 3080;
  CIL___Tmp44 = 458752;
  CIL___Tmp45 = 461832;
  CIL___Tmp46 = 461835;
  ntStatus = FlFdcDeviceIo(disketteExtension__TargetObject, CIL___Tmp46, fdcInfo);
  if (ntStatus >= 0) {
    disketteExtension__MaxTransferSize = fdcInfo__MaxTransferSize;
    if (fdcInfo__AcpiBios > 0 || fdcInfo__AcpiBios < 0) {
      if (fdcInfo__AcpiFdiSupported > 0 || fdcInfo__AcpiFdiSupported < 0) {
        ntStatus = FlAcpiConfigureFloppy(disketteExtension, fdcInfo);
        if ((disketteExtension__DriveType >= 4) && (disketteExtension__DriveType <= 4)) {
        }
      } else {
        goto my_L;
      }
    } else {
      my_L: 
      if ((disketteExtension__DriveType >= 4) && (disketteExtension__DriveType <= 4)) {
      }
      InterfaceType = 0;
      while (1) {

        if (InterfaceType >= MaximumInterfaceType) {
          goto mywhile_1_break;
        }
        fdcInfo__BusType = InterfaceType;
        ntStatus = IoQueryDeviceDescription(fdcInfo__BusType, fdcInfo__BusNumber, Dc, fdcInfo__ControllerNumber, Fp, fdcInfo__PeripheralNumber, FlConfigCallBack, disketteExtension);
        if (ntStatus >= 0) {
          goto mywhile_1_break;
        }
        InterfaceType = InterfaceType + 1;
      }

      mywhile_1_break: ;
    }
    if (ntStatus >= 0) {
      if ((KUSER_SHARED_DATA__AlternativeArchitecture_NEC98x86 > 0) || (KUSER_SHARED_DATA__AlternativeArchitecture_NEC98x86 < 0)) {
        disketteExtension__DeviceUnit = fdcInfo__UnitNumber;
      } else {
        disketteExtension__DeviceUnit = fdcInfo__PeripheralNumber;
      }
      pnpStatus = IoRegisterDeviceInterface(disketteExtension__UnderlyingPDO, MOUNTDEV_MOUNTED_DEVICE_GUID, 0, disketteExtension__InterfaceString);
      if (pnpStatus >= 0) {
        pnpStatus = IoSetDeviceInterfaceState(disketteExtension__InterfaceString, 1);
      }
      disketteExtension__IsStarted = 1;
      disketteExtension__HoldNewRequests = 0;
    }
  }
  Irp__IoStatus__Status = ntStatus;
  myStatus = ntStatus;
  IofCompleteRequest(Irp, 0);
  return (ntStatus);
}
}
int KeSetEvent(int Event , int Increment , int Wait ) ;
int FloppyPnpComplete(int DeviceObject , int Irp , int Context ) 
{ 

  {
  KeSetEvent(Context, 1, 0);
  return (-1073741802);
}
}
int IoBuildDeviceIoControlRequest(int IoControlCode , int DeviceObject , int InputBuffer , int InputBufferLength , int OutputBuffer , int OutputBufferLength , int InternalDeviceIoControl , int Event , int IoStatusBlock ) ;
int FlFdcDeviceIo(int DeviceObject , int Ioctl , int Data ) 
{ int ntStatus ;
  int irp ;
  int irpStack ;
  int doneEvent ;
  int ioStatus ;
  int irp__Tail__Overlay__CurrentStackLocation ;
  int irpStack__Parameters__DeviceIoControl__Type3InputBuffer ;
  int CIL___Tmp11 ;

  {
      CREST_int(CIL___Tmp11);
      CREST_int(irpStack__Parameters__DeviceIoControl__Type3InputBuffer);
      CREST_int(irp__Tail__Overlay__CurrentStackLocation);
      CREST_int(ioStatus);
      CREST_int(doneEvent);
      CREST_int(irpStack);
      CREST_int(irp);
      CREST_int(ntStatus);
  irp = IoBuildDeviceIoControlRequest(Ioctl, DeviceObject, 0, 0, 0, 0, 1, doneEvent, ioStatus);
  if ((irp >= 0) && (irp <= 0)) {
    return (-1073741670);
  }
  irpStack = irp__Tail__Overlay__CurrentStackLocation - 1;
  irpStack__Parameters__DeviceIoControl__Type3InputBuffer = Data;
  ntStatus = IofCallDriver(DeviceObject, irp);
  CIL___Tmp11 = (int )ntStatus;
  if ((CIL___Tmp11 >= 259) && (CIL___Tmp11 <= 259)) {
    KeWaitForSingleObject(doneEvent, Suspended, KernelMode, 0, 0);
    ntStatus = myStatus;
  }
  return (ntStatus);
}
}
void FloppyProcessQueuedRequests(int DisketteExtension ) 
{ 

  {
  return;
}
}
void stub_driver_init(void) 
{ 

  {
  s = NP;
  pended = 0;
  compRegistered = 0;
  lowerDriverReturn = 0;
  setEventCalled = 0;
  customIrp = 0;
  return;
}
}
int main(void) 
{ int status ;
  int irp ;
  int pirp ;
  int pirp__IoStatus__Status ;
  int irp_choice ;
  int devobj ;
  int tmp_ndt_1 ;

  {
      CREST_int(tmp_ndt_1);
      CREST_int(devobj);
      CREST_int(irp_choice);
      CREST_int(pirp__IoStatus__Status);
      CREST_int(pirp);
      CREST_int(irp);
      CREST_int(status);
  FloppyThread = 0;
  KernelMode = 0;
  Suspended = 0;
  Executive = 0;
  DiskController = 0;
  FloppyDiskPeripheral = 0;
  FlConfigCallBack = 0;
  MaximumInterfaceType = 0;
  MOUNTDEV_MOUNTED_DEVICE_GUID = 0;
  myStatus = 0;
  s = 0;
  UNLOADED = 0;
  NP = 0;
  DC = 0;
  SKIP1 = 0;
  SKIP2 = 0;
  MPR1 = 0;
  MPR3 = 0;
  IPC = 0;
  pended = 0;
  compRegistered = 0;
  lowerDriverReturn = 0;
  setEventCalled = 0;
  customIrp = 0;
  status = 0;
  pirp = irp;
  _BLAST_init();
  if (status >= 0) {
    s = NP;
    customIrp = 0;
    setEventCalled = customIrp;
    lowerDriverReturn = setEventCalled;
    compRegistered = lowerDriverReturn;
    pended = compRegistered;
    pirp__IoStatus__Status = 0;
    myStatus = 0;
    if ((irp_choice >= 0) && (irp_choice <= 0)) {
      pirp__IoStatus__Status = -1073741637;
      myStatus = -1073741637;
    }
    stub_driver_init();
    if (status < 0) {
      return (-1);
    }
    if ((tmp_ndt_1 >= 3) && (tmp_ndt_1 <= 3)) {
      goto myswitch_2_3;
    } else {
      goto myswitch_2_default;
      if (0) {
        myswitch_2_3: 
        status = FloppyPnp(devobj, pirp);
        goto myswitch_2_break;
        myswitch_2_default: ;
        return (-1);
      } else {
        myswitch_2_break: ;
      }
    }
  }
  if ((pended >= 1) && (pended <= 1)) {
    if ((s >= NP) && (s <= NP)) {
      s = NP;
    } else {
      goto my_L___2;
    }
  } else {
    my_L___2: 
    if ((pended >= 1) && (pended <= 1)) {
      if ((s >= MPR3) && (s <= MPR3)) {
        s = MPR3;
      } else {
        goto my_L___1;
      }
    } else {
      my_L___1: 
      if ((s > UNLOADED) || (s < UNLOADED)) {
        if ((status > -1) || (status < -1)) {
          if ((s > SKIP2) || (s < SKIP2)) {
            if ((s > IPC) || (s < IPC)) {
              if ((s > DC) || (s < DC)) {
                errorFn(1);
              } else {
                goto my_L___0;
              }
            } else {
              goto my_L___0;
            }
          } else {
            my_L___0: 
            if ((pended >= 1) && (pended <= 1)) {
              if ((status > 259) || (status < 259)) {
                status = 0;
              }
            } else {
              if ((s >= DC) && (s <= DC)) {
                if ((status >= 259) && (status <= 259)) {
                  errorFn(1);
                }
              } else {
                if ((status > lowerDriverReturn) || (status < lowerDriverReturn)) {
                  errorFn(1);
                }
              }
            }
          }
        }
      }
    }
  }
  status = 0;
  return (status);
}
}
int IoBuildDeviceIoControlRequest(int IoControlCode , int DeviceObject , int InputBuffer , int InputBufferLength , int OutputBuffer , int OutputBufferLength , int InternalDeviceIoControl , int Event , int IoStatusBlock ) 
{ int malloc ;
  int tmp_ndt_2 ;

  {
      CREST_int(tmp_ndt_2);
      CREST_int(malloc);
  customIrp = 1;
  if ((tmp_ndt_2 >= 0) && (tmp_ndt_2 <= 0)) {
    goto myswitch_3_0;
  } else {
    goto myswitch_3_default;
    if (0) {
      myswitch_3_0: 
      return (malloc);
      myswitch_3_default: ;
      return (0);
    }
  }
}
}
int IoDeleteSymbolicLink(int SymbolicLinkName ) 
{ int tmp_ndt_3 ;

  {
      CREST_int(tmp_ndt_3);
  if ((tmp_ndt_3 >= 0) && (tmp_ndt_3 <= 0)) {
    goto myswitch_4_0;
  } else {
    goto myswitch_4_default;
    if (0) {
      myswitch_4_0: 
      return (0);
      myswitch_4_default: ;
      return (-1073741823);
    }
  }
}
}
int IoQueryDeviceDescription(int BusType , int BusNumber , int ControllerType , int ControllerNumber , int PeripheralType , int PeripheralNumber , int CalloutRoutine , int Context ) 
{ int tmp_ndt_4 ;

  {
      CREST_int(tmp_ndt_4);
  if ((tmp_ndt_4 >= 0) && (tmp_ndt_4 <= 0)) {
    goto myswitch_5_0;
  } else {
    goto myswitch_5_default;
    if (0) {
      myswitch_5_0: 
      return (0);
      myswitch_5_default: ;
      return (-1073741823);
    }
  }
}
}
int IoRegisterDeviceInterface(int PhysicalDeviceObject , int InterfaceClassGuid , int ReferenceString , int SymbolicLinkName ) 
{ int tmp_ndt_5 ;

  {
      CREST_int(tmp_ndt_5);
  if ((tmp_ndt_5 >= 0) && (tmp_ndt_5 <= 0)) {
    goto myswitch_6_0;
  } else {
    goto myswitch_6_default;
    if (0) {
      myswitch_6_0: 
      return (0);
      myswitch_6_default: ;
      return (-1073741808);
    }
  }
}
}
int IoSetDeviceInterfaceState(int SymbolicLinkName , int Enable ) 
{ int tmp_ndt_6 ;

  {
      CREST_int(tmp_ndt_6);
  if ((tmp_ndt_6 >= 0) && (tmp_ndt_6 <= 0)) {
    goto myswitch_7_0;
  } else {
    goto myswitch_7_default;
    if (0) {
      myswitch_7_0: 
      return (0);
      myswitch_7_default: ;
      return (-1073741823);
    }
  }
}
}
void stubMoreProcessingRequired(void) 
{ 

  {
  if ((s >= NP) && (s <= NP)) {
    s = MPR1;
  } else {
    errorFn(1);
  }
  return;
}
}
int IofCallDriver(int DeviceObject , int Irp ) 
{ int returnVal2 ;
  int compRetStatus1 ;
  int lcontext ;
  int CIL___Tmp7 ;
  int tmp_ndt_7 ;
  int tmp_ndt_8 ;

  {
      CREST_int(tmp_ndt_8);
      CREST_int(tmp_ndt_7);
      CREST_int(CIL___Tmp7);
      CREST_int(lcontext);
      CREST_int(compRetStatus1);
      CREST_int(returnVal2);
  if (compRegistered > 0 || compRegistered < 0) {
    compRetStatus1 = FloppyPnpComplete(DeviceObject, Irp, lcontext);
    CIL___Tmp7 = (int )compRetStatus1;
    if ((CIL___Tmp7 >= -1073741802) && (CIL___Tmp7 <= -1073741802)) {
      stubMoreProcessingRequired();
    }
  }
  if ((tmp_ndt_7 >= 0) && (tmp_ndt_7 <= 0)) {
    goto myswitch_8_0;
  } else {
    if ((tmp_ndt_8 >= 1) && (tmp_ndt_8 <= 1)) {
      goto myswitch_8_1;
    } else {
      goto myswitch_8_default;
      if (0) {
        myswitch_8_0: 
        returnVal2 = 0;
        goto myswitch_8_break;
        myswitch_8_1: 
        returnVal2 = -1073741823;
        goto myswitch_8_break;
        myswitch_8_default: 
        returnVal2 = 259;
        goto myswitch_8_break;
      } else {
        myswitch_8_break: ;
      }
    }
  }
  if ((s >= NP) && (s <= NP)) {
    s = IPC;
    lowerDriverReturn = returnVal2;
  } else {
    if ((s >= MPR1) && (s <= MPR1)) {
      if ((returnVal2 >= 259) && (returnVal2 <= 259)) {
        s = MPR3;
        lowerDriverReturn = returnVal2;
      } else {
        s = NP;
        lowerDriverReturn = returnVal2;
      }
    } else {
      if ((s >= SKIP1) && (s <= SKIP1)) {
        s = SKIP2;
        lowerDriverReturn = returnVal2;
      } else {
        errorFn(1);
      }
    }
  }
  return (returnVal2);
}
}
void IofCompleteRequest(int Irp , int PriorityBoost ) 
{ 

  {
  if ((s >= NP) && (s <= NP)) {
    s = DC;
  } else {
    errorFn(1);
  }
  return;
}
}
int KeSetEvent(int Event , int Increment , int Wait ) 
{ int l ;

  {
      CREST_int(l);
  setEventCalled = 1;
  return (l);
}
}
int KeWaitForSingleObject(int Object , int WaitReason , int WaitMode , int Alertable , int Timeout ) 
{ int tmp_ndt_9 ;

  {
      CREST_int(tmp_ndt_9);
  if ((s >= MPR3) && (s <= MPR3)) {
    if ((setEventCalled >= 1) && (setEventCalled <= 1)) {
      s = NP;
      setEventCalled = 0;
    } else {
      goto my_L;
    }
  } else {
    my_L: 
    if ((customIrp >= 1) && (customIrp <= 1)) {
      s = NP;
      customIrp = 0;
    } else {
      if ((s >= MPR3) && (s <= MPR3)) {
        errorFn(1);
      }
    }
  }
  if ((tmp_ndt_9 >= 0) && (tmp_ndt_9 <= 0)) {
    goto myswitch_9_0;
  } else {
    goto myswitch_9_default;
    if (0) {
      myswitch_9_0: 
      return (0);
      myswitch_9_default: ;
      return (-1073741823);
    }
  }
}
}
int ObReferenceObjectByHandle(int Handle , int DesiredAccess , int ObjectType , int AccessMode , int Object , int HandleInformation ) 
{ int tmp_ndt_10 ;

  {
      CREST_int(tmp_ndt_10);
  if ((tmp_ndt_10 >= 0) && (tmp_ndt_10 <= 0)) {
    goto myswitch_10_0;
  } else {
    goto myswitch_10_default;
    if (0) {
      myswitch_10_0: 
      return (0);
      myswitch_10_default: ;
      return (-1073741823);
    }
  }
}
}
int PsCreateSystemThread(int ThreadHandle , int DesiredAccess , int ObjectAttributes , int ProcessHandle , int ClientId , int StartRoutine , int StartContext ) 
{ int tmp_ndt_11 ;

  {
      CREST_int(tmp_ndt_11);
  if ((tmp_ndt_11 >= 0) && (tmp_ndt_11 <= 0)) {
    goto myswitch_11_0;
  } else {
    goto myswitch_11_default;
    if (0) {
      myswitch_11_0: 
      return (0);
      myswitch_11_default: ;
      return (-1073741823);
    }
  }
}
}
int ZwClose(int Handle ) 
{ int tmp_ndt_12 ;

  {
      CREST_int(tmp_ndt_12);
  if ((tmp_ndt_12 >= 0) && (tmp_ndt_12 <= 0)) {
    goto myswitch_12_0;
  } else {
    goto myswitch_12_default;
    if (0) {
      myswitch_12_0: 
      return (0);
      myswitch_12_default: ;
      return (-1073741823);
    }
  }
}
}
int FloppyCreateClose(int DeviceObject , int Irp ) 
{ int Irp__IoStatus__Status ;
  int Irp__IoStatus__Information ;

  {
      CREST_int(Irp__IoStatus__Information);
      CREST_int(Irp__IoStatus__Status);
  myStatus = 0;
  Irp__IoStatus__Status = 0;
  Irp__IoStatus__Information = 1;
  IofCompleteRequest(Irp, 0);
  return (0);
}
}
